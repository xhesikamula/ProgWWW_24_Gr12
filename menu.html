<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Desserts - Doughlicious Creations</title>
    <link rel="stylesheet" href="./assets/css/style.css"> 
    <link rel="stylesheet" href="https://www.flaticon.com/free-icons/chef">
    <link rel="stylesheet" href="./assets/css/variablat.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.6.0/css/all.min.css" integrity="sha512-Kc323vGBEqzTmouAECnVceyQqyqdsSiqLQISBL29aUW4U/M7pSPA/gEUZQqv1cwx4OnYxTxve5UMg5GT6L4JJg==" crossorigin="anonymous" referrerpolicy="no-referrer" />

    <style>
    #auth-links {
    display: flex; 
    gap: 20px; 
}

#dashboard-links {
    display: none; 
    gap: 20px;
}

/* qeto duhet mi shtu te secili html */
.contact-form {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    background-color: white;
    padding: 20px;
    border: 1px solid #ddd;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    width: 300px;
    max-width: 90%;
    z-index: 1000;
}

.contact-form h3 {
    margin-bottom: 10px;
    font-size: 1.5em;
}

.contact-form label {
    display: block;
    margin: 10px 0 5px;
}

.contact-form input, .contact-form textarea {
    width: 100%;
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

.contact-form button {
    padding: 10px 15px;
    background-color: #CD001A;
    color: white;
    border: none;
    border-radius: 5px;
    cursor: pointer;
}

.contact-form button:hover {
    background-color: #b80014;
}
.popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .popup-content {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            text-align: center;
            width: 300px;
        }

        .popup.show {
            display: flex;
        }

        .footer2 {
    display: flex;
    flex-direction: column; 
    justify-content: space-between;
    align-items: center; 
    position: relative;
   
}

#footer-date {
    position: absolute;
    top: 5px; 
    font-size: 12px; 
    text-align: center; 
}

    </style>
</head>
<body>
    <header class="h-light">
        <div class="container">
            <input type="checkbox"/>
            <img src="./assets/img/pastrylogo.png" alt="Doughlicious Creations" class="header-image" style="margin-top: 3px;"/>
            <nav>
                <ul>
                    <li><a href="index.html">Home</a></li>
                    <li><a href="about.html">About</a></li>
                    <li><a href="menu.html">Menu</a></li>
                    <li><a href="index.html#reasons">Why us?</a></li>
                    <li><a href="#contact">Contact</a>
                        <i class="fa-solid fa-angle-down"></i>
                        <ul class="w-25">
                            <li><a href="https://www.whatsapp.com/" target="_blank">Whatsapp</a></li>
                            <li><a href="https://www.facebook.com/" target="_blank">Facebook</a></li>
                            <li><a href="https://www.instagram.com/" target="_blank">Instagram</a></li>
                            <li><a href="mailto:doughliciouscreations1@gmail.com" target="_blank">Email</a></li>
                        </ul>
                    </li>
                    <li id="auth-links">
                        <a href="register.html" id="register-link">Register</a>
                        <a href="login.html" id="login-link">Login</a>
                    </li>
                    <li id="dashboard-links" style="display: none;">
                        <a href="dashboard.html">Dashboard</a>
                        <a href="#" id="logout-link"><i class="fa-solid fa-right-from-bracket"></i></a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>


        <section class="dessert-section">
            <h1>Our Desserts</h1>
            <p style="text-align: center;">Select a dessert type to view items:</p>
            <div class="filter-buttons">
                <button onclick="filterDesserts('All')">All</button>
                <button onclick="filterDesserts('Cakes')">Cakes</button>
                <button onclick="filterDesserts('Cupcakes')">Cupcakes</button>
                <button onclick="filterDesserts('Pastries')">Pastries</button>
                <button onclick="filterDesserts('Donuts')">Donuts</button>
            </div>
            <div id="dessert-container" class="dessert-container">
                
            </div>
        </section>
    

    
<!-- //qeto deri nfund duhet mi shtu te secili html -->
<footer class="f-light" id="contact">
    <div class="container">
        <div class="columns">
            <div class="col-products">
                <h2><span>Products</span></h2>
                <ul>
                    <li><a href="#">Cakes</a></li>
                    <li><a href="#">Cupcakes</a></li>
                    <li><a href="#">Donuts</a></li>
                    <li><a href="#">Desserts</a></li>
                    <li><a href="#">Pastries</a></li>
                </ul>
            </div>
  
            <div class="col-site">
                <h2><span>Site</span></h2>
                <ul>
                    <li><a href="#">Home</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Menu</a></li>
                    <li><a href="#">Why us?</a></li>
                    <li><a href="#">Contact</a></li>
                </ul>
            </div>
            
            <div class="col-contact">
                <h2><span>Contact Details</span></h2>
                <address>
                    <p>Pastry Lane, Sweetville, ST 12345</p>
                    <p>(123) 456-7890</p>
                    <p><a id="email-link" href="#" onclick="document.getElementById('contact-form').style.display = 'block'; return false;">doughliciouscreations1@gmail.com</a></p>
  
                </address>
            </div>
            
            <div class="col-socials">
                <h2><span>Socials</span></h2>
                <ul>
                    <li><a href="https://www.whatsapp.com/" target="_blank"><i class="fa-brands fa-whatsapp"></i> Whatsapp</a></li>
                    <li><a href="https://www.facebook.com/" target="_blank"><i class="fa-brands fa-facebook"></i> Facebook</a></li>
                    <li><a href="https://www.instagram.com/" target="_blank"><i class="fa-brands fa-instagram"></i> Instagram</a></li>
                </ul>
            </div>
        </div>
    </div>
  </footer>
  
  <div id="contact-form" class="contact-form" style="display: none;">
    <button class="close-form" type="button">X</button> <!-- Add this close button -->
    <h3>Contact Us</h3>
    <form id="contactForm">
      <label for="name">Name:</label>
      <input type="text" id="name" name="name" required>
      
      <label for="email">Email:</label>
      <input type="email" id="email" name="email" required>
      
      <label for="message">Message:</label>
      <textarea id="message" name="message" required></textarea>
      
      <button type="submit">Submit</button> <!-- Ensure the button is inside the form and is of type "submit" -->
  </form>
  
  </div>
  
  
      <!-- Success Popup -->
      <div id="success-popup" class="popup">
        <div class="popup-content">
            <span class="close-btn">&times;</span>
            <p>Your message has been sent successfully!</p>
        </div>
    </div>
  
  <script type="text/javascript" src="https://cdn.emailjs.com/dist/email.min.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
        const SERVICE_ID = "service_cma8dgh"; 
        const TEMPLATE_ID = "template_kothtbc"; 
        const MIN_WAIT_TIME = 3;  
        const MAX_WAIT_TIME = 5;  
  
        emailjs.init("-C-clPiF39yrBIRpw");
  
        const emailLink = document.getElementById('email-link');
        const contactForm = document.getElementById('contact-form');
        const form = document.getElementById('contactForm');
  
        if (!form) {
            console.error("Form element not found. Please ensure the form has the correct ID.");
            return;
        }
  
        emailLink.addEventListener('click', (e) => {
            e.preventDefault();
            contactForm.style.display = 'block'; 
        });
  
        contactForm.querySelector('.close-form').addEventListener('click', () => {
            contactForm.style.display = 'none';
        });
  
        document.addEventListener('click', (e) => {
            if (!contactForm.contains(e.target) && !emailLink.contains(e.target)) {
                contactForm.style.display = 'none';
            }
        });
  
        form.addEventListener('submit', function (e) {
            e.preventDefault();
  
            emailjs.sendForm(SERVICE_ID, TEMPLATE_ID, form)
                .then(function(response) {
                    console.log('Email sent successfully', response);
                    showSuccessPopup();
                    contactForm.style.display = 'none'; 
                    form.reset(); 
                }, function(error) {
                    console.error('Error sending email', error);
                    alert('Oops! Something went wrong. Please try again later.');
                });
        });
  
        function showSuccessPopup() {
            const successPopup = document.getElementById('success-popup');
            successPopup.classList.add('show');
            
            const waitTime = Math.floor(Math.random() * (MAX_WAIT_TIME - MIN_WAIT_TIME + 1)) + MIN_WAIT_TIME;
            console.log(Popup will hide after ${waitTime} seconds.);
  
            setTimeout(() => {
                successPopup.classList.remove('show');
            }, waitTime * 1000); 
        }
    });
    </script>
  
  <footer2 class="footer2">
      <div class="container">
              <div class="copyright">
                  <b>Â© DoughliciousCreations 2024</b>
              </div>
  
              <div class="terms-links">
                  <ul class="terms-list">
                      <li><a href="#">Terms and Conditions</a></li>
                      <li><a href="#">Privacy</a></li>
                      <li><a href="#">Accessibility</a></li>
                  </ul>
              </div>
  
              <div class="social-icons">
                  <i class="fa-brands fa-square-facebook icon fb-icon"></i>
                  <i class="fa-brands fa-square-x-twitter icon"></i>
                  <i class="fa-brands fa-square-instagram icon ig-icon"></i>
              </div>
      </div>
      <small id="footer-date"></small>
  </footer2>
  
  <script>
    document.addEventListener('DOMContentLoaded', function () {
        const footerDate = new Date();
        const formattedDate = footerDate.toLocaleDateString(); 
        document.getElementById('footer-date').innerText = Last updated: ${formattedDate};
    });
    </script>

    <script src="App.js"></script>

    <script>
        const dessertContainer = document.getElementById('dessert-container');
        let allDesserts = [];

       
        async function fetchDesserts() {
            try {
                const response = await fetch('https://671fc5b3e7a5792f052f7efc.mockapi.io/Pastry');
                const data = await response.json();
                allDesserts = data;
                displayDesserts(allDesserts); 
            } catch (error) {
                console.error('Error fetching desserts:', error);
                dessertContainer.innerHTML = '<p>Failed to load desserts. Please try again later.</p>';
            }
        }


function displayDesserts(desserts) {
    dessertContainer.innerHTML = desserts.map(dessert => `
        <div class="dessert-card">
            <img src="${dessert.item_image}" alt="${dessert.item_name}">
            <h2>${dessert.item_name}</h2>
            <p><strong>Price: $</strong>${dessert.price}</p>
            <p><strong>Availability:</strong> ${dessert.available}</p>
            <p><strong>In Stock:</strong> ${dessert.stock}</p>
            <button onclick="viewDetails('${dessert.id}')" class="order-button">
    Order & Details
</button>

        </div>
    `).join('');
}

function viewDetails(dessertId) {
    window.location.href = order-details.html?id=${dessertId}; 
}

        function filterDesserts(type) {
            const filteredDesserts = type === 'All' ? allDesserts : allDesserts.filter(dessert => dessert.type === type);
            displayDesserts(filteredDesserts);
        }

        fetchDesserts();
    </script>
</body>
</html>
